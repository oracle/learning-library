{"paragraphs":[{"text":"%md\n#Tutorial 8 Working with the Object Store\n\nWelcome to Oracle Big Data Cloud Service - Compute Edition (BDCS-CE).\n\nThis tutorial was built for BDCS-CE version 17.2.5.  If you are using a later version of BDCS-CE, please look for a newer version of this tutorial notebook at <https://github.com/oracle/learning-library/tree/master/workshops/journey2-new-data-lake>.  Questions and feedback about the tutorial: <david.bayard@oracle.com>\n\n    Be Sure To Have Successfully Followed The Instructions In The Tutorial \"Setting up your BDCSCE Environment\" Before Starting This Tutorial.\n\n\n**Contents**\n+ About Oracle Storage Cloud Object Store\n+ Importance of Object Store\n+ Configure your Object Store Credentials\n+ Download sample data\n+ Upload files to the Object Store\n+ List Object Store Containers\n+ List files in an Object Store Container\n+ Download files from the Object Store\n+ Upload/download from the local file system to HDFS\n+ Use Hadoop Tools (hadoop fs or distcp) with Object Store\n+ Use the BDCS-CE Console Data Stores Viewer\n+ Next Steps\n\nAs a reminder, the documentation for BDCS-CE can be found here: <http://docs.oracle.com/cloud/latest/big-data-compute-cloud/index.html>\n\n\n","dateUpdated":"2017-07-19T11:37:12+0000","config":{"editorSetting":{"language":"text","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/text","editorHide":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true,"title":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1500464028770_-1280834237","id":"20170310-124446_1861963408","dateCreated":"2017-07-19T11:33:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:5045","user":"anonymous","dateFinished":"2017-07-19T11:35:19+0000","dateStarted":"2017-07-19T11:35:18+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p>#Tutorial 8 Working with the Object Store</p>\n<p>Welcome to Oracle Big Data Cloud Service - Compute Edition (BDCS-CE).</p>\n<p>This tutorial was built for BDCS-CE version 17.2.5. If you are using a later version of BDCS-CE, please look for a newer version of this tutorial notebook at <a href=\"https://github.com/oracle/learning-library/tree/master/workshops/journey2-new-data-lake\">https://github.com/oracle/learning-library/tree/master/workshops/journey2-new-data-lake</a>. Questions and feedback about the tutorial: <a href=\"mailto:&#100;a&#118;&#x69;&#x64;&#x2e;&#x62;&#97;&#x79;&#x61;r&#100;&#x40;&#111;r&#97;&#99;&#108;e&#46;c&#x6f;&#109;\">&#100;a&#118;&#x69;&#x64;&#x2e;&#x62;&#97;&#x79;&#x61;r&#100;&#x40;&#111;r&#97;&#99;&#108;e&#46;c&#x6f;&#109;</a></p>\n<pre><code>Be Sure To Have Successfully Followed The Instructions In The Tutorial &quot;Setting up your BDCSCE Environment&quot; Before Starting This Tutorial.\n</code></pre>\n<p><strong>Contents</strong><br/>+ About Oracle Storage Cloud Object Store<br/>+ Importance of Object Store<br/>+ Configure your Object Store Credentials<br/>+ Download sample data<br/>+ Upload files to the Object Store<br/>+ List Object Store Containers<br/>+ List files in an Object Store Container<br/>+ Download files from the Object Store<br/>+ Upload/download from the local file system to HDFS<br/>+ Use Hadoop Tools (hadoop fs or distcp) with Object Store<br/>+ Use the BDCS-CE Console Data Stores Viewer<br/>+ Next Steps</p>\n<p>As a reminder, the documentation for BDCS-CE can be found here: <a href=\"http://docs.oracle.com/cloud/latest/big-data-compute-cloud/index.html\">http://docs.oracle.com/cloud/latest/big-data-compute-cloud/index.html</a></p>\n</div>"}]}},{"text":"%md\n#About Oracle Storage Cloud Object Store\n\nOracle Storage Cloud Object Store provides storage that is secure, resilient, elastic, and simple to use so your data is available when you need it from any environment connected to the Internet.  An overview can be found here: <https://cloud.oracle.com/en_US/storage/object-storage/features> and documentation can be found here: <http://docs.oracle.com/en/cloud/iaas/storage-cloud/index.html>\n\nFor purposes of this tutorial, it is important to know that the Oracle Object Store supports the industry standard OpenStack Object Storage API.  This OpenStack Object Storage API is known as \"swift\". BDCS-CE includes swift drivers that work with Spark and Hadoop so that you can use those tools with Object Store data.  This tutorial will provide examples of using the swift drivers with the Oracle Object Store.\n\nThe tutorial will also provide examples of using the opensource swift command-line utility. Details here: <https://docs.openstack.org/developer/python-swiftclient/cli.html>\n\nIn addition to the examples we provide in this tutorial, there are other ways to interact with the Object Store.  There is a web browser GUI for the Object Store which you can access from your Oracle Cloud My Services page.\n![StorageGUI](https://raw.githubusercontent.com/oracle/learning-library/master/workshops/journey2-new-data-lake/images/300/Storage.gif \"Object Store GUI\")\n\nThere are desktop tools like the Windows Cloudberry Explorer OpenStack Swift client: <https://www.cloudberrylab.com/explorer/openstack.aspx>\n\nAnd there are also various utilities like UploadCLI (very useful for large files) and other APIs (REST, Java, etc), which are documented here: <http://docs.oracle.com/en/cloud/iaas/storage-cloud/index.html>\n","dateUpdated":"2017-07-19T11:35:50+0000","config":{"editorSetting":{"language":"text","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/text","editorHide":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1500464028771_-1281218985","id":"20170310-124506_633450220","dateCreated":"2017-07-19T11:33:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5046","user":"anonymous","dateFinished":"2017-07-19T11:35:50+0000","dateStarted":"2017-07-19T11:35:50+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p>#About Oracle Storage Cloud Object Store</p>\n<p>Oracle Storage Cloud Object Store provides storage that is secure, resilient, elastic, and simple to use so your data is available when you need it from any environment connected to the Internet. An overview can be found here: <a href=\"https://cloud.oracle.com/en_US/storage/object-storage/features\">https://cloud.oracle.com/en_US/storage/object-storage/features</a> and documentation can be found here: <a href=\"http://docs.oracle.com/en/cloud/iaas/storage-cloud/index.html\">http://docs.oracle.com/en/cloud/iaas/storage-cloud/index.html</a></p>\n<p>For purposes of this tutorial, it is important to know that the Oracle Object Store supports the industry standard OpenStack Object Storage API. This OpenStack Object Storage API is known as &ldquo;swift&rdquo;. BDCS-CE includes swift drivers that work with Spark and Hadoop so that you can use those tools with Object Store data. This tutorial will provide examples of using the swift drivers with the Oracle Object Store.</p>\n<p>The tutorial will also provide examples of using the opensource swift command-line utility. Details here: <a href=\"https://docs.openstack.org/developer/python-swiftclient/cli.html\">https://docs.openstack.org/developer/python-swiftclient/cli.html</a></p>\n<p>In addition to the examples we provide in this tutorial, there are other ways to interact with the Object Store. There is a web browser GUI for the Object Store which you can access from your Oracle Cloud My Services page.<br/><img src=\"https://raw.githubusercontent.com/oracle/learning-library/master/workshops/journey2-new-data-lake/images/300/Storage.gif\" alt=\"StorageGUI\" title=\"Object Store GUI\" /></p>\n<p>There are desktop tools like the Windows Cloudberry Explorer OpenStack Swift client: <a href=\"https://www.cloudberrylab.com/explorer/openstack.aspx\">https://www.cloudberrylab.com/explorer/openstack.aspx</a></p>\n<p>And there are also various utilities like UploadCLI (very useful for large files) and other APIs (REST, Java, etc), which are documented here: <a href=\"http://docs.oracle.com/en/cloud/iaas/storage-cloud/index.html\">http://docs.oracle.com/en/cloud/iaas/storage-cloud/index.html</a></p>\n</div>"}]}},{"text":"%md\n#Importance of Object Store\n\n![New Data Lake](https://raw.githubusercontent.com/oracle/learning-library/master/workshops/journey2-new-data-lake/images/snap0012028.jpg)\nFor Big Data, Object Store enables you to\n+ Detach compute from storage to allow for the two environments to grow independently \n+ Persist all the data in a low cost, globally distributed store that speeds processes up while making it more durable\n+ Maintain a core, distribution based environment while being able to use the latest and greatest Hadoop projects on demand\n","dateUpdated":"2017-07-19T11:37:30+0000","config":{"tableHide":false,"editorSetting":{"editOnDblClick":"true","language":"markdown"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1500464028772_-1283142730","id":"20170403-112031_1056462344","dateCreated":"2017-07-19T11:33:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5047","user":"anonymous","dateFinished":"2017-07-19T11:37:30+0000","dateStarted":"2017-07-19T11:37:30+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p>#Importance of Object Store</p>\n<p><img src=\"https://raw.githubusercontent.com/oracle/learning-library/master/workshops/journey2-new-data-lake/images/snap0012028.jpg\" alt=\"New Data Lake\" /><br/>For Big Data, Object Store enables you to<br/>+ Detach compute from storage to allow for the two environments to grow independently<br/>+ Persist all the data in a low cost, globally distributed store that speeds processes up while making it more durable<br/>+ Maintain a core, distribution based environment while being able to use the latest and greatest Hadoop projects on demand</p>\n</div>"}]}},{"text":"%md\n#Configuring your Object Store Credentials\n\nThe following paragraph will setup a shell script (swift_env.sh) to retrieve your Storage Cloud credentials to simplify running the swift command.\n\nFill in the 3 variable/parameter fields in the paragraph belwo with your Object Store credentials before running the next section.  If you need to change your values, simply re-run the paragraph below.","dateUpdated":"2017-07-19T11:37:41+0000","config":{"editorSetting":{"editOnDblClick":"true","language":"markdown"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1500464028772_-1283142730","id":"20170403-102632_1937341942","dateCreated":"2017-07-19T11:33:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5048","user":"anonymous","dateFinished":"2017-07-19T11:37:41+0000","dateStarted":"2017-07-19T11:37:41+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p>#Configuring your Object Store Credentials</p>\n<p>The following paragraph will setup a shell script (swift_env.sh) to retrieve your Storage Cloud credentials to simplify running the swift command.</p>\n<p>Fill in the 3 variable/parameter fields in the paragraph belwo with your Object Store credentials before running the next section. If you need to change your values, simply re-run the paragraph below.</p>\n</div>"}]}},{"title":"Script to save/load object store credentials for swift CLI","text":"%sh\nmv swift_env.sh swift_env.sh.old\nST_TENANT=${identity-domain=gse00010212}\nCLOUD_USER=${cloud-username=cloud.admin}\nCLOUD_PASSWORD=${cloud-password=yourpassword}\necho \"export ST_AUTH=https://$ST_TENANT.storage.oraclecloud.com/auth/v1.0\" >> swift_env.sh\necho \"export ST_USER=Storage-$ST_TENANT:$CLOUD_USER\" >> swift_env.sh\necho \"export ST_KEY=$CLOUD_PASSWORD\" >> swift_env.sh\necho \"export SWIFT_PARAMS=\\\"-D fs.swift.service.main.auth.url=https://$ST_TENANT.storage.oraclecloud.com/auth/v2.0/tokens \\\n-D fs.swift.service.main.tenant=Storage-$ST_TENANT \\\n-D fs.swift.service.main.username=$CLOUD_USER \\\n-D fs.swift.service.main.password=$CLOUD_PASSWORD \\\n-D fs.swift.service.main.public=true\\\" \" >> swift_env.sh\n\n# echo $SWIFT_PARAMS\nchmod u+x swift_env.sh\nls -l swift_env.sh","dateUpdated":"2017-07-19T11:37:45+0000","config":{"tableHide":false,"editorSetting":{"editOnDblClick":"false","language":"sh"},"colWidth":12,"editorMode":"ace/mode/sh","editorHide":false,"title":true,"results":{},"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{"cloud-password":"cloud.admin.password","identity-domain":"gse00010911","cloud-username":"cloud.admin"},"forms":{"cloud-password":{"name":"cloud-password","defaultValue":"yourpassword","hidden":false,"$$hashKey":"object:6610"},"identity-domain":{"name":"identity-domain","defaultValue":"gse00010212","hidden":false,"$$hashKey":"object:6612"},"cloud-username":{"name":"cloud-username","defaultValue":"cloud.admin","hidden":false,"$$hashKey":"object:6611"}}},"apps":[],"jobName":"paragraph_1500464028773_-1283527479","id":"20170403-102756_1455090006","dateCreated":"2017-07-19T11:33:48+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5049"},{"text":"%md\n#Before you continue...\n\nThe following paragraph tests that Storage Cloud connectivity is working.  Please run the paragraph below and ensure that you see a list of Object Store containers.","dateUpdated":"2017-07-19T11:39:07+0000","config":{"editorSetting":{"editOnDblClick":"true","language":"markdown"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1500464028774_-1282373232","id":"20170403-103306_330160693","dateCreated":"2017-07-19T11:33:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5050","user":"anonymous","dateFinished":"2017-07-19T11:39:07+0000","dateStarted":"2017-07-19T11:39:07+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p>#Before you continue&hellip;</p>\n<p>The following paragraph tests that Storage Cloud connectivity is working. Please run the paragraph below and ensure that you see a list of Object Store containers.</p>\n</div>"}]}},{"title":"Command to test Object Store connectivity","text":"%sh\nsource ~/swift_env.sh\nswift list","dateUpdated":"2017-07-19T11:38:24+0000","config":{"tableHide":false,"editorSetting":{"language":"sh","editOnDblClick":"false"},"colWidth":12,"editorMode":"ace/mode/sh","editorHide":false,"title":true,"results":{},"enabled":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1500464028774_-1282373232","id":"20170310-124525_1623072950","dateCreated":"2017-07-19T11:33:48+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5051","user":"anonymous","dateFinished":"2017-07-19T11:38:18+0000","dateStarted":"2017-07-19T11:38:16+0000"},{"text":"%md\n#Download some sample data for experimentation\n\nNext, we will download some sample data to experiment with.  In this example, we are going to download the text of a handful of United States Presidential Inauguration Speeches.  We will install the lynx browser to help us. Then we will download the speeches from the **Yale Law School Avalon Project** website: <http://avalon.law.yale.edu/subject_menus/inaug.asp> ","dateUpdated":"2017-07-19T11:39:13+0000","config":{"editorSetting":{"editOnDblClick":"true","language":"markdown"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1500464028775_-1282757981","id":"20170403-103530_1455796101","dateCreated":"2017-07-19T11:33:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5052","user":"anonymous","dateFinished":"2017-07-19T11:39:13+0000","dateStarted":"2017-07-19T11:39:13+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p>#Download some sample data for experimentation</p>\n<p>Next, we will download some sample data to experiment with. In this example, we are going to download the text of a handful of United States Presidential Inauguration Speeches. We will install the lynx browser to help us. Then we will download the speeches from the <strong>Yale Law School Avalon Project</strong> website: <a href=\"http://avalon.law.yale.edu/subject_menus/inaug.asp\">http://avalon.law.yale.edu/subject_menus/inaug.asp</a></p>\n</div>"}]}},{"title":"Commands to download sample data (presidential speeches)","text":"%sh\n#setup for this tutorial\necho \"running yum to install lynx. This may take 5 to 10 minutes to refresh yum cache. Please be patient\"\nsudo yum -y install lynx 2>&1\necho \"after yum\"\n\n#let's make the zeppelin directory readable.  This is so that Spark jobs can read these files later...\nchmod ga+rx .\n\nmkdir speeches\ncd speeches\n\n#download some text from the internet using the lynx browser\n#we will grab inauguration speeches from here http://avalon.law.yale.edu/subject_menus/inaug.asp\n\nlynx -dump -nolist http://avalon.law.yale.edu/18th_century/wash1.asp | head -n -23 | tail -n +17 > pres1789_wash1.txt\nlynx -dump -nolist http://avalon.law.yale.edu/19th_century/lincoln1.asp | head -n -23 | tail -n +17 > pres1861_lincoln1.txt\nlynx -dump -nolist http://avalon.law.yale.edu/20th_century/froos1.asp | head -n -23 | tail -n +17 > pres1933_fdr1.txt\nlynx -dump -nolist http://avalon.law.yale.edu/20th_century/kennedy.asp | head -n -23 | tail -n +17 > pres1961_jfk.txt\nlynx -dump -nolist http://avalon.law.yale.edu/20th_century/reagan1.asp | head -n -23 | tail -n +17 > pres1981_reagan1.txt\n\necho \"files downloaded are:\"\nls -l\n\necho \"..\"\n\necho \"done\"","dateUpdated":"2017-07-19T11:39:28+0000","config":{"tableHide":false,"editorSetting":{"editOnDblClick":"false","language":"sh"},"colWidth":12,"editorMode":"ace/mode/sh","editorHide":false,"title":true,"results":{},"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1500464028776_-1284681726","id":"20170314-123722_1592949003","dateCreated":"2017-07-19T11:33:48+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5053","user":"anonymous","dateFinished":"2017-07-19T11:40:30+0000","dateStarted":"2017-07-19T11:39:19+0000"},{"text":"%md\n#Before you continue...\n\nBefore you continue, be sure to have run the paragraph above and check the output.  At the bottom of the output, you should see 5 presidential speeches stored as .txt files.\n","dateUpdated":"2017-07-19T11:40:18+0000","config":{"editorSetting":{"editOnDblClick":"true","language":"markdown"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1500464028776_-1284681726","id":"20170403-104137_306661141","dateCreated":"2017-07-19T11:33:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5054","user":"anonymous","dateFinished":"2017-07-19T11:40:18+0000","dateStarted":"2017-07-19T11:40:18+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p>#Before you continue&hellip;</p>\n<p>Before you continue, be sure to have run the paragraph above and check the output. At the bottom of the output, you should see 5 presidential speeches stored as .txt files.</p>\n</div>"}]}},{"text":"%md\n#How to upload a file from the BDCS-CE linux file system to the Object Store\n\nWe have now downloaded the text of several Presidential speeches to the local linux file system on the Zeppelin server.  Let's now look at how we can upload those files to the Object Store.  To do so, we will use the swift command line tool.\n\nBefore running the paragraph below, please put the name of the Object Store container where you want to store the files.  This container should already exist.  If you need to create a new container, try using the Storage Cloud web UI launchable from the Oracle Cloud My Services web page, or uncomment the \"swift post\" command in the below paragraph.\n","dateUpdated":"2017-07-19T11:40:24+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":"true"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true,"tableHide":false},"settings":{"params":{"identity-domain":"gse00010212"},"forms":{}},"apps":[],"jobName":"paragraph_1500464028777_-1285066474","id":"20170310-124752_2058114707","dateCreated":"2017-07-19T11:33:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5055","user":"anonymous","dateFinished":"2017-07-19T11:40:24+0000","dateStarted":"2017-07-19T11:40:24+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p>#How to upload a file from the BDCS-CE linux file system to the Object Store</p>\n<p>We have now downloaded the text of several Presidential speeches to the local linux file system on the Zeppelin server. Let&rsquo;s now look at how we can upload those files to the Object Store. To do so, we will use the swift command line tool.</p>\n<p>Before running the paragraph below, please put the name of the Object Store container where you want to store the files. This container should already exist. If you need to create a new container, try using the Storage Cloud web UI launchable from the Oracle Cloud My Services web page, or uncomment the &ldquo;swift post&rdquo; command in the below paragraph.</p>\n</div>"}]}},{"text":"%sh\nsource ~/swift_env.sh\n\n#cd speeches\n\necho \"listing contents of linux file system\"\nls -l speeches/\necho \"..\"\n\nCONTAINER=${container=demo}\n\n# if you need to create a new container, uncomment the following line\nswift post $CONTAINER 2>&1\n\necho \"uploading to Object Store\"\n\nswift upload $CONTAINER speeches/pres*.txt 2>&1\necho \"..\"\n\necho \"listing contents of container\"\nswift list $CONTAINER  2>&1\n\n\necho \"done\"","dateUpdated":"2017-07-19T11:40:46+0000","config":{"tableHide":false,"editorSetting":{"language":"sh","editOnDblClick":"false"},"colWidth":12,"editorMode":"ace/mode/sh","editorHide":false,"results":{},"enabled":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}},"settings":{"params":{"container":"demo"},"forms":{"container":{"name":"container","defaultValue":"demo","hidden":false,"$$hashKey":"object:6934"}}},"apps":[],"jobName":"paragraph_1500464028778_-1283912228","id":"20170310-124813_560716809","dateCreated":"2017-07-19T11:33:48+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5056"},{"text":"%md\n#Before you continue...\n\nBefore you continue, be sure to run the paragraph above and check the output.  You should see the presidential speech text files in the \"listing contents of container\" section of the output.\n","dateUpdated":"2017-07-19T11:40:55+0000","config":{"editorSetting":{"editOnDblClick":"true","language":"markdown"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1500464028792_-1278525743","id":"20170403-110152_148074599","dateCreated":"2017-07-19T11:33:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5057","user":"anonymous","dateFinished":"2017-07-19T11:40:55+0000","dateStarted":"2017-07-19T11:40:55+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p>#Before you continue&hellip;</p>\n<p>Before you continue, be sure to run the paragraph above and check the output. You should see the presidential speech text files in the &ldquo;listing contents of container&rdquo; section of the output.</p>\n</div>"}]}},{"text":"%md\n#How to List Containers in the Object Store\n","dateUpdated":"2017-07-19T11:40:59+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":"true"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1500464028792_-1278525743","id":"20170310-124557_413741810","dateCreated":"2017-07-19T11:33:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5058","user":"anonymous","dateFinished":"2017-07-19T11:40:59+0000","dateStarted":"2017-07-19T11:40:59+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p>#How to List Containers in the Object Store</p>\n</div>"}]}},{"text":"%sh\nsource ~/swift_env.sh\nswift list 2>&1","dateUpdated":"2017-07-19T11:41:02+0000","config":{"tableHide":false,"editorSetting":{"language":"sh","editOnDblClick":"false"},"colWidth":12,"editorMode":"ace/mode/sh","editorHide":false,"results":{},"enabled":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1500464028793_-1278910492","id":"20170310-124614_1524074990","dateCreated":"2017-07-19T11:33:48+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5059"},{"text":"%md \n#How to List Files in a specific Container\n\nEnter the name of one of your containers shown above in the parameter field below.","dateUpdated":"2017-07-19T11:41:10+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":"true"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1500464028794_-1277756245","id":"20170310-124642_248820191","dateCreated":"2017-07-19T11:33:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5060","user":"anonymous","dateFinished":"2017-07-19T11:41:10+0000","dateStarted":"2017-07-19T11:41:10+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p>#How to List Files in a specific Container</p>\n<p>Enter the name of one of your containers shown above in the parameter field below.</p>\n</div>"}]}},{"text":"%sh\nsource ~/swift_env.sh\nswift list ${container=demo} 2>&1\n","dateUpdated":"2017-07-19T11:41:13+0000","config":{"tableHide":false,"editorSetting":{"language":"sh","editOnDblClick":"false"},"colWidth":12,"editorMode":"ace/mode/sh","editorHide":false,"results":{},"enabled":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}},"settings":{"params":{"container":"demo"},"forms":{"container":{"name":"container","defaultValue":"demo","hidden":false,"$$hashKey":"object:7066"}}},"apps":[],"jobName":"paragraph_1500464028794_-1277756245","id":"20170310-124657_334106322","dateCreated":"2017-07-19T11:33:48+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5061"},{"text":"%md\n#How to download from the Object Store to the local linux file system\n","dateUpdated":"2017-07-19T11:41:23+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":"true"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1500464028794_-1277756245","id":"20170310-124931_1822013181","dateCreated":"2017-07-19T11:33:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5062","user":"anonymous","dateFinished":"2017-07-19T11:41:23+0000","dateStarted":"2017-07-19T11:41:23+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p>#How to download from the Object Store to the local linux file system</p>\n</div>"}]}},{"text":"%sh\nsource ~/swift_env.sh\n\n# make a temp directory\nmkdir /tmp/speeches\ncd /tmp/speeches\n\n# clear out temp directory\nrm pres*.txt\n\necho \"Listing local linux files before download\"\nls -l \necho \"..\"\n\necho \"Downloading a single file from object store\"\n\nswift download ${container=demo} speeches/pres1789_wash1.txt 2>&1\necho \"..\"\n\necho \"Listing local linux files after download\"\nls -l \nls -l speeches/\n\necho \"done\"","dateUpdated":"2017-07-19T11:41:26+0000","config":{"tableHide":false,"editorSetting":{"language":"sh","editOnDblClick":"false"},"colWidth":12,"editorMode":"ace/mode/sh","editorHide":false,"results":{},"enabled":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}},"settings":{"params":{"container":"demo"},"forms":{"container":{"name":"container","defaultValue":"demo","hidden":false,"$$hashKey":"object:7113"}}},"apps":[],"jobName":"paragraph_1500464028795_-1278140994","id":"20170310-124959_2033132768","dateCreated":"2017-07-19T11:33:48+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5063"},{"text":"%md\n#How to upload/download from the local file system to hdfs\n\nSo far in this note, we've worked with files stored in the Object Store as well as files stored on the Zeppelin server's linux file system.  We will now demonstrate how to work your BDCS-CE's HDFS file system.  ","dateUpdated":"2017-07-19T11:41:33+0000","config":{"editorSetting":{"language":"text","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/text","editorHide":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1500464028795_-1278140994","id":"20170310-125022_992238564","dateCreated":"2017-07-19T11:33:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5064","user":"anonymous","dateFinished":"2017-07-19T11:41:33+0000","dateStarted":"2017-07-19T11:41:33+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p>#How to upload/download from the local file system to hdfs</p>\n<p>So far in this note, we&rsquo;ve worked with files stored in the Object Store as well as files stored on the Zeppelin server&rsquo;s linux file system. We will now demonstrate how to work your BDCS-CE&rsquo;s HDFS file system.</p>\n</div>"}]}},{"text":"%sh\ncd speeches\necho \"Local file listing\"\nls -l\necho \"..\"\n\necho \"HDFS file listing for zeppelin user's default directory\"\nhadoop fs -ls 2>&1\necho \"..\"\n\necho \"Create a HDFS subdirectory speeches_hdfs (if not already there)\"\nhadoop fs -mkdir speeches_hdfs 2>&1\necho \"..\"\n\necho \"copy file from local linux file system into HDFS\"\nhadoop fs -put pres1861_lincoln1.txt speeches_hdfs/pres1861_lincoln.txt 2>&1\necho \"..\"\n\necho \"HDFS file listing of subdirectoryfor after copy\"\nhadoop fs -ls speeches_hdfs/ 2>&1\necho \"..\"\n\necho \"copy file from HDFS to a local linux file\"\nhadoop fs -get speeches_hdfs/pres1861_lincoln.txt lincoln1_local.txt  2>&1\necho \"..\"\n\necho \"Local linux file listing\"\nls -l\necho \"..\"\n\n#remove the file we just copied to avoid confusion\nrm lincoln1_local.txt\n\necho \"done\"\n","dateUpdated":"2017-07-19T11:41:38+0000","config":{"tableHide":false,"editorSetting":{"language":"sh","editOnDblClick":"false"},"colWidth":12,"editorMode":"ace/mode/sh","editorHide":false,"results":{},"enabled":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1500464028795_-1278140994","id":"20170310-125106_1853119614","dateCreated":"2017-07-19T11:33:48+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5065"},{"text":"%md\n#Before you continue...\n\nBefore you continue, be sure to run the paragraph above and check the output.  You should see the pres1861_lincoln.txt file successfully copied to HDFS.  The next tutorial will be expecting it to be there.","dateUpdated":"2017-07-19T11:41:45+0000","config":{"editorSetting":{},"colWidth":12,"editorMode":"ace/mode/scala","editorHide":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1500464028795_-1278140994","id":"20170403-111201_1505916192","dateCreated":"2017-07-19T11:33:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5066","user":"anonymous","dateFinished":"2017-07-19T11:41:45+0000","dateStarted":"2017-07-19T11:41:45+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p>#Before you continue&hellip;</p>\n<p>Before you continue, be sure to run the paragraph above and check the output. You should see the pres1861_lincoln.txt file successfully copied to HDFS. The next tutorial will be expecting it to be there.</p>\n</div>"}]}},{"text":"%md\n#Using Hadoop Tools (hadoop fs or distcp) with Object Store\n\nThe next paragraph shows some examples of using hadoop tools like the \"hadoop fs\" command with the Object Store via Hadoop's support of the OpenStack swift filesystem.\n\n\n\nWe will use the \"default\" set of Object Store credentials.  These \"default\" credentials were defined when you created this BDCS-CE instance.\n\nThe syntax of the swift filesystem is:\n\n*swift://Container.default/filename*\n\nwhere **Container** is the name of your Object Store container and **default** is the name of your credentials property set.  For this tutorial, we will always use \"default\" for the credentials set name (see the commented lines in the paragraph below if you want an example of using a different set of credentials).\n","dateUpdated":"2017-07-19T11:41:51+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":"true"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1500464028796_-1280064739","id":"20170310-125238_348876259","dateCreated":"2017-07-19T11:33:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5067","user":"anonymous","dateFinished":"2017-07-19T11:41:51+0000","dateStarted":"2017-07-19T11:41:51+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p>#Using Hadoop Tools (hadoop fs or distcp) with Object Store</p>\n<p>The next paragraph shows some examples of using hadoop tools like the &ldquo;hadoop fs&rdquo; command with the Object Store via Hadoop&rsquo;s support of the OpenStack swift filesystem.</p>\n<p>We will use the &ldquo;default&rdquo; set of Object Store credentials. These &ldquo;default&rdquo; credentials were defined when you created this BDCS-CE instance.</p>\n<p>The syntax of the swift filesystem is:</p>\n<p>*<a href=\"swift://Container.default/filename*\">swift://Container.default/filename*</a></p>\n<p>where <strong>Container</strong> is the name of your Object Store container and <strong>default</strong> is the name of your credentials property set. For this tutorial, we will always use &ldquo;default&rdquo; for the credentials set name (see the commented lines in the paragraph below if you want an example of using a different set of credentials).</p>\n</div>"}]}},{"title":"Commands to use Hadoop tools to access Object Store","text":"%sh\n\n# example of copying from Object Store to HDFS (without writing to local file system first)\nCONTAINER=${container=demo}\n\necho \"use hadoop fs to list files on Object Store container\"\nhadoop fs -ls swift://$CONTAINER.default/speeches 2>&1\necho \"..\"\n\necho \"use hadoop fs to copy file (pres1789_wash1.txt) from Object Store to HDFS (objstorecopy.txt)\"\nhadoop fs -cp swift://$CONTAINER.default/speeches/pres1789_wash1.txt objstorecopy.txt 2>&1\necho \"..\"\n\necho \"see if the file (objstorecopy.txt) got copied into hdfs\"\nhadoop fs -ls 2>&1 \necho \"..\"\n\necho \"clean up the file from hdfs\"\nhadoop fs -rm objstorecopy.txt 2>&1\necho \"..\"\n\n# For BDCS 17.2.1, the hdfs /user/zeppelin directory is not readable by others, which means it can't be seen with the Data Stores tab.  We'll quickly fix it here:\nhadoop fs -chmod 755 /user/zeppelin\n\necho \"done\"\n\n# Note: if you want to use something other than the default Object Store connection, here is an example\n#source swift_env.sh\n#export HADOOP_ROOT_LOGGER=DEBUG,console\n#hadoop fs $SWIFT_PARAMS -ls swift://DB-bdcs-mar06.main/speeches 2>&1\n\n# Note: The $SWIFT_PARAMS properties can also be set in /etc/hadoop/conf/core-site.xml \n# for more details, see https://spark.apache.org/docs/1.6.1/storage-openstack-swift.html or https://github.com/zioproto/hadoop-swift-tutorial","dateUpdated":"2017-07-19T11:33:48+0000","config":{"tableHide":false,"editorSetting":{"editOnDblClick":"false","language":"sh"},"colWidth":12,"editorMode":"ace/mode/sh","editorHide":false,"title":true,"results":{},"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{"container":"demo"},"forms":{"container":{"name":"container","defaultValue":"demo","hidden":false,"$$hashKey":"object:6353"}}},"apps":[],"jobName":"paragraph_1500464028796_-1280064739","id":"20170316-123141_156532587","dateCreated":"2017-07-19T11:33:48+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5068"},{"text":"%md\n#Use the BDCS-CE Console Data Stores Viewer\n\nAs a final exercise in this tutorial, we will show you how to view the HDFS and Object Store via the BDCS-CE Console's Data Stores tab.\n\nSimply click on the Data Stores tab (you will leave this Note, but you can click on the Notebook tab to navigate back) and explore both the HDFS and Object Store sections.\n\n + For HDFS, you should be able to navigate to the /user/zeppelin/speeches_hdfs directory and see a screen like this:\n\n![HDFS](https://raw.githubusercontent.com/oracle/learning-library/master/workshops/journey2-new-data-lake/images/300/snap0011506.jpg \"HDFS\")\n\n + For Object Store, you should be able to see the individual speeches files (assumes that you uploaded the speeches to the \"default\" container, which is the container you named when you created your BDCS-CE instance):\n\n![ObjectStore](https://raw.githubusercontent.com/oracle/learning-library/master/workshops/journey2-new-data-lake/images/300/snap0011504.jpg \"Object Store\")","dateUpdated":"2017-07-19T11:43:05+0000","config":{"editorSetting":{"editOnDblClick":"true","language":"markdown"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1500464028796_-1280064739","id":"20170413-131335_1926680784","dateCreated":"2017-07-19T11:33:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5069","user":"anonymous","dateFinished":"2017-07-19T11:43:05+0000","dateStarted":"2017-07-19T11:43:05+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<p>#Use the BDCS-CE Console Data Stores Viewer</p>\n<p>As a final exercise in this tutorial, we will show you how to view the HDFS and Object Store via the BDCS-CE Console&rsquo;s Data Stores tab.</p>\n<p>Simply click on the Data Stores tab (you will leave this Note, but you can click on the Notebook tab to navigate back) and explore both the HDFS and Object Store sections.</p>\n<ul>\n  <li>For HDFS, you should be able to navigate to the /user/zeppelin/speeches_hdfs directory and see a screen like this:</li>\n</ul>\n<p><img src=\"https://raw.githubusercontent.com/oracle/learning-library/master/workshops/journey2-new-data-lake/images/300/snap0011506.jpg\" alt=\"HDFS\" title=\"HDFS\" /></p>\n<ul>\n  <li>For Object Store, you should be able to see the individual speeches files (assumes that you uploaded the speeches to the &ldquo;default&rdquo; container, which is the container you named when you created your BDCS-CE instance):</li>\n</ul>\n<p><img src=\"https://raw.githubusercontent.com/oracle/learning-library/master/workshops/journey2-new-data-lake/images/300/snap0011504.jpg\" alt=\"ObjectStore\" title=\"Object Store\" /></p>\n</div>"}]}},{"dateUpdated":"2017-07-19T11:42:30+0000","config":{"editorSetting":{"language":"scala"},"colWidth":12,"editorMode":"ace/mode/scala","results":{},"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorHide":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1500464028796_-1280064739","id":"20170413-143554_1275199172","dateCreated":"2017-07-19T11:33:48+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5070","user":"anonymous","text":""}],"name":" Tutorial 8 Working with the Object Store","id":"2CNMAP7K5","angularObjects":{"2CNW8HM6F:shared_process":[],"2CQA8RVBH:shared_process":[],"2CPBC1JBJ:shared_process":[],"2CP9D5M3M:shared_process":[],"2CMFH5UVC:shared_process":[],"2CPGG2FKV:shared_process":[],"2CPA8A394:shared_process":[],"2CQ2JJV7J:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}