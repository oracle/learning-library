{"paragraphs":[{"text":"%md\n# DataSci Tutorial 1: Setup for R, SparkR, RStudio Server\n\nThis tutorial was built for BDCS-CE version 17.3.3-20 as part of the Data Science Acceleration User Journey: <a href=\"https://oracle.github.io/learning-library/workshops/journey3-data-science/\" target=\"_blank\">here</a>.  Questions and feedback about the tutorial: <david.bayard@oracle.com>\n\n    Be sure you previously ran the New Data Lake Tutorials: \"Citi Bike New York Demo Introduction and Setup\" and \"Working with Hive\".\n    They can be found at https://github.com/oracle/learning-library/tree/master/workshops/journey2-new-data-lake \n\nThis notebook provides shell scripts to install various R components.\n\n\nThere are a couple of key requirements before running this (sudo for the zeppelin user and an increased timeout for the zeppelin shell interpreter).  Assuming you used the bootstrap.sh script as instructed in the New Data Lake instructions when you created your BDCS-CE instance, then these requirement have already been met.\n\n","dateUpdated":"2017-08-13T13:00:16+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":"true"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>DataSci Tutorial 1: Setup for R, SparkR, RStudio Server</h1>\n<p>This tutorial was built for BDCS-CE version 17.3.3-20 as part of the Data Science Acceleration User Journey: <a href=\"https://oracle.github.io/learning-library/workshops/journey3-data-science/\" target=\"_blank\">here</a>. Questions and feedback about the tutorial: <a href=\"mailto:&#x64;&#97;&#118;i&#x64;&#46;b&#x61;&#x79;a&#114;&#100;&#64;o&#114;&#x61;c&#x6c;&#x65;.co&#x6d;\">&#x64;&#97;&#118;i&#x64;&#46;b&#x61;&#x79;a&#114;&#100;&#64;o&#114;&#x61;c&#x6c;&#x65;.co&#x6d;</a></p>\n<pre><code>Be sure you previously ran the New Data Lake Tutorials: &quot;Citi Bike New York Demo Introduction and Setup&quot; and &quot;Working with Hive&quot;.\nThey can be found at https://github.com/oracle/learning-library/tree/master/workshops/journey2-new-data-lake \n</code></pre>\n<p>This notebook provides shell scripts to install various R components.</p>\n<p>There are a couple of key requirements before running this (sudo for the zeppelin user and an increased timeout for the zeppelin shell interpreter). Assuming you used the bootstrap.sh script as instructed in the New Data Lake instructions when you created your BDCS-CE instance, then these requirement have already been met.</p>\n</div>"}]},"apps":[],"jobName":"paragraph_1502567774007_338212089","id":"20170808-163449_1475568497","dateCreated":"2017-08-12T19:56:14+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:334","user":"anonymous","dateFinished":"2017-08-13T13:00:16+0000","dateStarted":"2017-08-13T13:00:16+0000"},{"text":"%md\n# Install Oracle R Distribution for BDCS-CE\n\nThe next paragraph will run a script /usr/bin/install-oracle-r.sh that is provided with BDCS-CE.  This script installs:\n\n+ Oracle R Distribution 3.2\n+ R Zeppelin support files\n+ R Packages: devtools, knitr, ggplot2, RCurl, RJSONIO, devtools, mplot, googleVis, rCharts, plus many other dependencies\n\nNote: the next paragraph will take about 20 minutes to run.  Please be patient.\n\n","dateUpdated":"2017-08-12T19:56:14+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":"true"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Install Oracle R Distribution for BDCS-CE</h1>\n<p>The next paragraph will run a script /usr/bin/install-oracle-r.sh that is provided with BDCS-CE. This script installs:</p>\n<ul>\n  <li>Oracle R Distribution 3.2</li>\n  <li>R Zeppelin support files</li>\n  <li>R Packages: devtools, knitr, ggplot2, RCurl, RJSONIO, devtools, mplot, googleVis, rCharts, plus many other dependencies</li>\n</ul>\n<p>Note: the next paragraph will take about 20 minutes to run. Please be patient.</p>\n</div>"}]},"apps":[],"jobName":"paragraph_1502567774008_336288344","id":"20170808-165259_146359412","dateCreated":"2017-08-12T19:56:14+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:335"},{"title":"Install Oracle R Distribution (will take 20 minutes or so)","text":"%sh\necho \"Starting script to install R. Please be patient.  You will not see any more output until it is finished.\"\n# as of BDCSCE 17.3.1, this installs R 3.2\n# Note with 17.3.1, we need to set JAVA_HOME to the jdk (not jre) for rJava to install right.\nsudo -- sh -c 'export JAVA_HOME=/u01/bdcsce/usr/java/jdk1.8.0_131; export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/u01/bdcsce/usr/java/jdk1.8.0_131/jre/lib/amd64/server; /usr/bin/install-oracle-r.sh > /tmp/install-oracle-r.log 2>&1'\necho \"..\"\necho \"..\"\necho \"First 50 lines...\"\nhead -50 /tmp/install-oracle-r.log\necho \"..\"\necho \"..\"\necho \"Last 50 lines...\"\ntail -50 /tmp/install-oracle-r.log\n\necho \"..\"\necho \"..\"\necho \"done\"\n","dateUpdated":"2017-08-13T13:21:44+0000","config":{"tableHide":false,"editorSetting":{"language":"sh","editOnDblClick":"false"},"colWidth":12,"editorMode":"ace/mode/sh","editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1502567774008_336288344","id":"20170808-163523_1271014141","dateCreated":"2017-08-12T19:56:14+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:336","user":"anonymous","dateFinished":"2017-08-13T13:21:27+0000","dateStarted":"2017-08-13T13:00:44+0000"},{"title":"Install RStudio Server (will take about a minute)","text":"%sh\nsudo -- sh -c 'wget -nc -nv https://download2.rstudio.org/rstudio-server-rhel-1.0.143-x86_64.rpm; yum -y install --nogpgcheck rstudio-server-rhel-1.0.143-x86_64.rpm'","dateUpdated":"2017-08-13T13:22:31+0000","config":{"tableHide":false,"editorSetting":{"language":"sh","editOnDblClick":"false"},"colWidth":12,"editorMode":"ace/mode/sh","editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1502567774008_336288344","id":"20170807-203854_689528620","dateCreated":"2017-08-12T19:56:14+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:337","user":"anonymous","dateFinished":"2017-08-13T13:22:09+0000","dateStarted":"2017-08-13T13:21:51+0000"},{"title":"Create a user for RStudio Server","text":"%sh\ncat <<EOF > /tmp/r_user.sh\n\tuseradd ruser\n\techo -e \"welcome1\\nwelcome1\" | passwd ruser\n\techo \"finsihed adduser\" \n\tusermod -a -G hive,hadoop ruser\n\techo \"finsihed groups\" \n\tsudo -u hdfs hadoop fs -mkdir /user/ruser\n\tsudo -u hdfs hadoop fs -chown ruser /user/ruser\n\techo \"finsihed hdoop fs commands\" \nEOF\n\nchmod a+x /tmp/r_user.sh\nsudo /tmp/r_user.sh\n\necho \"done\"","dateUpdated":"2017-08-13T13:22:46+0000","config":{"tableHide":false,"editorSetting":{"language":"sh","editOnDblClick":"false"},"colWidth":12,"editorMode":"ace/mode/sh","editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1502567774008_336288344","id":"20170808-190037_2014572394","dateCreated":"2017-08-12T19:56:14+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:338","user":"anonymous","dateFinished":"2017-08-13T13:22:43+0000","dateStarted":"2017-08-13T13:22:35+0000"},{"title":"Test that R is working (will take a minute for initial startup)","text":"%r\n3+3\n","dateUpdated":"2017-08-13T13:22:52+0000","config":{"editorSetting":{"language":"r","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/r","title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1502567774009_335903596","id":"20170809-232210_598079324","dateCreated":"2017-08-12T19:56:14+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:339","user":"anonymous","dateFinished":"2017-08-13T13:22:54+0000","dateStarted":"2017-08-13T13:22:52+0000"},{"title":"List of R packages now installed","text":"%r\nip <- as.data.frame(installed.packages()[,c(1,3:4)])\nrownames(ip) <- NULL\nip <- ip[is.na(ip$Priority),1:2,drop=FALSE]\nprint(ip, row.names=FALSE)","dateUpdated":"2017-08-13T13:22:58+0000","config":{"editorSetting":{"language":"r"},"colWidth":12,"editorMode":"ace/mode/r","title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1502567774009_335903596","id":"20170809-232255_270585171","dateCreated":"2017-08-12T19:56:14+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:340","user":"anonymous","dateFinished":"2017-08-13T13:22:58+0000","dateStarted":"2017-08-13T13:22:58+0000"},{"text":"%md\n# Next Steps\n\nYour BDCS-CE environment is now setup with R, SparkR, RStudio Server, and many common R packages.\n\nProceed to the next Tutorial to see R and SparkR in action with the Zeppelin Notebook.\n","user":"anonymous","dateUpdated":"2017-08-13T13:24:18+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":"true"},"editorMode":"ace/mode/markdown","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1502630594276_-554775602","id":"20170813-132314_999701569","dateCreated":"2017-08-13T13:23:14+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:1189","dateFinished":"2017-08-13T13:24:18+0000","dateStarted":"2017-08-13T13:24:18+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Next Steps</h1>\n<p>Your BDCS-CE environment is now setup with R, SparkR, RStudio Server, and many common R packages.</p>\n<p>Proceed to the next Tutorial to see R and SparkR in action with the Zeppelin Notebook.</p>\n</div>"}]}},{"text":"%md\n### Change Log\nAugust 13, 2017 - Confirmed it works with BDCS-CE 17.3.3-20\nAugust 11, 2017 - First version\n","dateUpdated":"2017-08-13T13:22:24+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":"true"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h3>Change Log</h3>\n<p>August 13, 2017 - Confirmed it works with BDCS-CE 17.3.3-20<br/>August 11, 2017 - First version</p>\n</div>"}]},"apps":[],"jobName":"paragraph_1502567774009_335903596","id":"20170807-213344_2033634383","dateCreated":"2017-08-12T19:56:14+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:341","user":"anonymous","dateFinished":"2017-08-13T13:22:24+0000","dateStarted":"2017-08-13T13:22:24+0000"},{"text":"%sh\n","dateUpdated":"2017-08-12T19:56:14+0000","config":{"colWidth":12,"editorMode":"ace/mode/sh","results":{},"enabled":true,"editorSetting":{"language":"sh","editOnDblClick":"false"}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1502567774010_337057842","id":"20170807-212453_1371905199","dateCreated":"2017-08-12T19:56:14+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:342"}],"name":"DataSci Tutorial 1 Setup for R SparkR RStudio","id":"2CR4HCB22","angularObjects":{"2CQA2VQ3C:shared_process":[],"2CSX451P1:shared_process":[],"2CQH9FYAV:shared_process":[],"2CPQ7W1ZD:shared_process":[],"2CQDB4M3A:shared_process":[],"2CSD8BUF1:shared_process":[],"2C4U48MY3_spark2:shared_process":[],"2CRZ9M6JB:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}