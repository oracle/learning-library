{"paragraphs":[{"text":"%md\n# Monitoring YARN\n\nThis notebook shows you some tricks for monitoring YARN, the resource scheduling system for Hadoop.  These can be useful on very small BDCS-CE clusters (especially the 2OCPU OC2M shape) where YARN processes can get stuck waiting for resources.\n\nHere are 3 techniques for monitoring YARN\n\n+ Connect to the Resource Manager web UI\n+ Run the \"yarn top\" command via SSH\n+ Run various yarn commands via notebook\n\n","user":"anonymous","dateUpdated":"2017-08-23T21:00:40+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":"true"},"editorMode":"ace/mode/markdown","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Monitoring YARN</h1>\n<p>This notebook shows you some tricks for monitoring YARN, the resource scheduling system for Hadoop. These can be useful on very small BDCS-CE clusters (especially the 2OCPU OC2M shape) where YARN processes can get stuck waiting for resources.</p>\n<p>Here are 3 techniques for monitoring YARN</p>\n<ul>\n  <li>Connect to the Resource Manager web UI</li>\n  <li>Run the &ldquo;yarn top&rdquo; command via SSH</li>\n  <li>Run various yarn commands via notebook</li>\n</ul>\n</div>"}]},"apps":[],"jobName":"paragraph_1503513388013_1470820503","id":"20170823-183628_2032714173","dateCreated":"2017-08-23T18:36:28+0000","dateStarted":"2017-08-23T21:00:40+0000","dateFinished":"2017-08-23T21:00:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:320"},{"text":"%md\n# Connect to Resource Manager web UI\n\nThe Resource Manager web UI runs on port 8088 on the BDCS-CE Master server.  You can either open this port via an Access Rule or connect to it via SSH Tunneling.\n\nTo do so, follow the instructions in the note \"xtra Connecting to Ambari\" but use port 8088 instead of 8080 and http instead of https.\n\n![ResourceMgr](https://raw.githubusercontent.com/oracle/learning-library/master/workshops/journey2-new-data-lake/images/200/snap0012328.jpg)\n\n","user":"anonymous","dateUpdated":"2017-08-23T21:09:36+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":"true"},"editorMode":"ace/mode/markdown","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Connect to Resource Manager web UI</h1>\n<p>The Resource Manager web UI runs on port 8088 on the BDCS-CE Master server. You can either open this port via an Access Rule or connect to it via SSH Tunneling.</p>\n<p>To do so, follow the instructions in the note &ldquo;xtra Connecting to Ambari&rdquo; but use port 8088 instead of 8080 and http instead of https.</p>\n<p><img src=\"https://raw.githubusercontent.com/oracle/learning-library/master/workshops/journey2-new-data-lake/images/200/snap0012328.jpg\" alt=\"ResourceMgr\" /></p>\n</div>"}]},"apps":[],"jobName":"paragraph_1503522043230_-1242495044","id":"20170823-210043_33659668","dateCreated":"2017-08-23T21:00:43+0000","dateStarted":"2017-08-23T21:09:36+0000","dateFinished":"2017-08-23T21:09:36+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:321"},{"text":"%md\n# Run the \"yarn top\" command via SSH\n\nAnother way you can monitor yarn is via logging into BDCS-CE via SSH and running the \"yarn top\" command.  Refer to the note \"xtra Connecting via SSH\" to connect via SSH.  Then type \"yarn top\" to launch the tool.  Type \"h\" followed by enter to view help.\n\n![Yarn top](https://raw.githubusercontent.com/oracle/learning-library/master/workshops/journey2-new-data-lake/images/200/snap0012329.jpg)","user":"anonymous","dateUpdated":"2017-08-23T21:09:56+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":"true"},"editorMode":"ace/mode/markdown","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Run the &ldquo;yarn top&rdquo; command via SSH</h1>\n<p>Another way you can monitor yarn is via logging into BDCS-CE via SSH and running the &ldquo;yarn top&rdquo; command. Refer to the note &ldquo;xtra Connecting via SSH&rdquo; to connect via SSH. Then type &ldquo;yarn top&rdquo; to launch the tool. Type &ldquo;h&rdquo; followed by enter to view help.</p>\n<p><img src=\"https://raw.githubusercontent.com/oracle/learning-library/master/workshops/journey2-new-data-lake/images/200/snap0012329.jpg\" alt=\"Yarn top\" /></p>\n</div>"}]},"apps":[],"jobName":"paragraph_1503522216475_-985069026","id":"20170823-210336_22884452","dateCreated":"2017-08-23T21:03:36+0000","dateStarted":"2017-08-23T21:09:56+0000","dateFinished":"2017-08-23T21:09:56+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:322"},{"text":"%md\n# Run various yarn commands via notebook\n\nAnother way to monitor yarn is via a series of yarn commands run in the notebook shell interpreter.  The following paragraphs provide a few examples you can use and modify.","user":"anonymous","dateUpdated":"2017-08-23T21:06:31+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":"true"},"editorMode":"ace/mode/markdown","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Run various yarn commands via notebook</h1>\n<p>Another way to monitor yarn is via a series of yarn commands run in the notebook shell interpreter. The following paragraphs provide a few examples you can use and modify.</p>\n</div>"}]},"apps":[],"jobName":"paragraph_1503522329949_-999503950","id":"20170823-210529_1115413889","dateCreated":"2017-08-23T21:05:29+0000","dateStarted":"2017-08-23T21:06:31+0000","dateFinished":"2017-08-23T21:06:31+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:323"},{"title":"Script to see the Used versus Capacity for YARN CPU and Memory","text":"%sh\nexport YARN_ROOT_LOGGER=WARN\nexport NODEID=`yarn node -list -all | tail -1 | cut -f1`\necho $NODEID\nyarn node -status $NODEID\n","user":"anonymous","dateUpdated":"2017-08-23T21:06:35+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":"false"},"editorMode":"ace/mode/sh","editorHide":false,"tableHide":false,"title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1503515094963_646938479","id":"20170823-190454_1112719671","dateCreated":"2017-08-23T19:04:54+0000","dateStarted":"2017-08-23T19:45:15+0000","dateFinished":"2017-08-23T19:45:20+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:324"},{"title":"Script to see the current YARN applications and State","text":"%sh\nexport YARN_ROOT_LOGGER=WARN\nyarn application -list\n","user":"anonymous","dateUpdated":"2017-08-23T21:06:46+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":"false"},"editorMode":"ace/mode/sh","editorHide":false,"tableHide":false,"title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1503513427393_-1472661824","id":"20170823-183707_2061582102","dateCreated":"2017-08-23T18:37:07+0000","dateStarted":"2017-08-23T19:45:26+0000","dateFinished":"2017-08-23T19:45:29+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:325"},{"text":"%sh\nexport YARN_ROOT_LOGGER=WARN\nyarn ","user":"anonymous","dateUpdated":"2017-08-23T18:42:16+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":"false"},"editorMode":"ace/mode/sh"},"settings":{"params":{},"forms":{}},"results":{"code":"ERROR","msg":[{"type":"TEXT","data":"Usage: yarn [--config confdir] [COMMAND | CLASSNAME]\n  CLASSNAME                             run the class named CLASSNAME\n or\n  where COMMAND is one of:\n  resourcemanager                       run the ResourceManager\n                                        Use -format-state-store for deleting the RMStateStore.\n                                        Use -remove-application-from-state-store <appId> for \n                                            removing application from RMStateStore.\n  nodemanager                           run a nodemanager on each slave\n  timelineserver                        run the timeline server\n  rmadmin                               admin tools\n  sharedcachemanager                    run the SharedCacheManager daemon\n  scmadmin                              SharedCacheManager admin tools\n  version                               print the version\n  jar <jar>                             run a jar file\n  application                           prints application(s)\n                                        report/kill application\n  applicationattempt                    prints applicationattempt(s)\n                                        report\n  container                             prints container(s) report\n  node                                  prints node report(s)\n  queue                                 prints queue information\n  logs                                  dump container logs\n  classpath                             prints the class path needed to\n                                        get the Hadoop jar and the\n                                        required libraries\n  cluster                               prints cluster information\n  daemonlog                             get/set the log level for each\n                                        daemon\n  envvars                               display computed Hadoop environment variables\n  top                                   run cluster usage tool\n\nMost commands print help when invoked w/o parameters.\n"},{"type":"TEXT","data":"ExitValue: 1"}]},"apps":[],"jobName":"paragraph_1503513438646_-350318634","id":"20170823-183718_2075012832","dateCreated":"2017-08-23T18:37:18+0000","dateStarted":"2017-08-23T18:42:16+0000","dateFinished":"2017-08-23T18:42:16+0000","status":"ERROR","progressUpdateIntervalMs":500,"$$hashKey":"object:326"},{"text":"%sh\n","user":"anonymous","dateUpdated":"2017-08-23T18:42:53+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":"false"},"editorMode":"ace/mode/sh"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1503513773468_1284001104","id":"20170823-184253_1294363530","dateCreated":"2017-08-23T18:42:53+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:327"}],"name":"xtra Monitoring YARN","id":"2CSWEZZW2","angularObjects":{"2CU424UXA:shared_process":[],"2CTNC42UC:shared_process":[],"2CSQFS352:shared_process":[],"2CRHFBYJQ:shared_process":[],"2CT2G6RST:shared_process":[],"2CSNDNYNF:shared_process":[],"2C4U48MY3_spark2:shared_process":[],"2CTPU7MSJ:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}